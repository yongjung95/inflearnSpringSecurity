# 세션 관리

> 인프런의 정수원님의 스프링 시큐리티 완전 정복 [6.x 개정판]을 보며 실습하고 정리하는 레포지토리 입니다.

## 동시 세션 제어 - sessionManagement().maximumSessions()
### 개요
- 동시 세션 제어는 사용자가 동시에 여러 세션을 생성하는 것을 관리하는 전략이다.
- 이 전략은 사용자의 인증 후에 활성화된 세션의 설정된 **maximumSessions** 값과 비교하여 제어 여부를 결정한다.

### 동시 세션 제어 2가지 유형
![img.png](사진폴더/05/동시%20세션%20제어%202가지%20유형.png)

### sessionManagement() API - 동시 세션 제어
![img.png](사진폴더/05/sessionManagement()%20API%20-%20동시%20세션%20제어.png)

### 세션 만료 후 리다이렉션 전략
![img.png](사진폴더/05/세션%20만료%20후%20리다이렉션%20전략.png)


## 세션 고정 보호
### 세션 고정 보호 전략
- 세션 고정 공격은 악의적인 공격자가 사이트에 접근하여 세션을 생성한 다음 다른 사용자가 같은 세션으로 로그인하도록 유도하는 위험을 말한다.
- 스프링 시큐리티는 사용자가 로그인할 때 새로운 세션을 생성하거나 세션 ID를 변경함으로써 이러한 공격에 자동으로 대응한다.

### 세션 고정 공격
![img.png](사진폴더/05/세션%20고정%20공격.png)

### sessionManagement() API - 세션 고정 보호
![img.png](사진폴더/05/sessionManagement()%20API%20-%20세션%20고정%20보호.png)
- 세션 고정 보호 전략
  - changeSessionId() : 기존 세션을 유지하면서 세션 ID만 변경하여 인증 과정에서 세션 고정 공격을 방지하는 방식이다. 기본 값으로 설정되어 있다.
  - newSession() : 새로운 세션을 생성하고, 기존 세션 데이터를 복사하지 않는 방식이다. (SPRING_SECURITY_로 시작하는 속성은 복사한다.)
  - migrateSession() : 새로운 세션을 생성하고 모든 기존 세션 속성을 새 세션으로 복사한다.
  - none() : 기존 세션을 그대로 사용한다. (사용 ❌)